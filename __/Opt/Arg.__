subclass Arg
  __init__
    replace
    compare
    exists
  end

  def exists (arg, argv)
    variable index = wherefirst (arg == @argv);

    if (NULL == index)
      return NULL;

    variable del = qualifier_exists ("del_arg");
    variable ret = qualifier_exists ("ret_arg");

    if (ret )
      ret = (@argv)[index];
    else
      ret = NULL;

    if (del)
      Array.delete_at (argv, index);

    ifnot (NULL == ret)
      ret;

    index;
  end

  def compare (arg, argv)
    variable index = wherenot (strncmp (@argv, arg, strlen (arg)));
    ifnot (length (index))
      return NULL;

    variable del = qualifier_exists ("del_arg");
    variable ret = qualifier_exists ("ret_arg");

    if (ret)
      ret = (@argv)[index[0]];
    else
      ret = NULL;

    if (del)
      Array.delete_at (argv, index[0]);

    ifnot (NULL == ret)
      ret;

    index[0];
  end

  def replace (argv, atindex, witharg)
    (@argv)[atindex] = witharg;
  end
end
